{% extends 'app/auth_template/base.html' %}
{% load static %}

{% block title %}Đặt lại mật khẩu{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'app/css/login.css' %}">
{% endblock %}

{% block content %}
<div class="container" id="container">
  <div class="form-container sign-in-container reset-form">

    {% if validlink %}
    <form method="post">
      {% csrf_token %}
      <h1>Đặt lại mật khẩu</h1>

      {% if form.errors %}
      <div class="password-errors">
        <ul>
          {% for field in form %}
            {% for error in field.errors %}
              <li>{{ error }}</li>
            {% endfor %}
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      <input
        type="password"
        name="new_password1"
        placeholder="Mật khẩu mới"
        required
      >

      <input
        type="password"
        name="new_password2"
        placeholder="Xác nhận mật khẩu"
        required
      >

      <button type="submit">Đổi mật khẩu</button>
    </form>
    {% else %}
      <p>Link đặt lại mật khẩu không hợp lệ hoặc đã hết hạn.</p>
    {% endif %}

  </div>

  <div class="overlay-container">
    <div class="overlay">
      <div class="overlay-panel overlay-right">
        <h1>Gần xong rồi!</h1>
        <p>Hãy đặt mật khẩu mới đủ mạnh để bảo vệ tài khoản của bạn.</p>
        <button class="ghost" onclick="window.location='{% url 'login' %}'">
          Đăng nhập
        </button>
      </div>
    </div>
  </div>
</div>
{% endblock %}
