{% load static %}
<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Đặt Tiêu đề</title>
    <link rel="stylesheet" href="{% static 'app/css/tieude.css' %}">
    <style>
        /* optional tweak to reuse tieude.css layout exactly */
    </style>
</head>

<body>
    <div class="start-container">

        <div class="start-header fixed-header">
            <a href="{% url 'home' %}">
                <img src="{% static 'app/images/logo.jpg' %}" alt="logo">
            </a>
            <div class="header-actions">
                <button class="btn btnThacMac">Bạn có thắc mắc?</button>
                <button class="btn btnLuuThoat">Lưu và thoát</button>
            </div>
        </div>

        <form method="POST" action="{% url 'dattieude' %}">
            {% csrf_token %}
            <div class="start-main scroll-area">
                <h1 class="question">Đặt Tiêu đề cho nơi ở của bạn</h1>

                <textarea name="title" id="titleInput" maxlength="50" placeholder="Viết tiêu đề ngắn"></textarea>
                <div class="char-row"><span id="charCount">0</span>/50</div>
            </div>

            <div class="start-footer fixed-footer">
                <a href="{% url 'loaichoo' %}" class="back-link">Quay lại</a>
                <button type="submit" class="next-btn disabled">Tiếp theo</button>
            </div>
        </form>
    </div>

</body>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const input = document.getElementById('titleInput');
        const countEl = document.getElementById('charCount');
        const nextBtn = document.querySelector('.next-btn');
        const MAX = 50;

        function update() {
            const len = input.value.length;
            countEl.textContent = len;
            if (len >= 45 && len < MAX) {
                document.querySelector('.char-row').classList.add('limit-near');
            } else {
                document.querySelector('.char-row').classList.remove('limit-near');
            }
            if (len >= 1 && len <= MAX) {
                nextBtn.disabled = false;
                nextBtn.classList.remove('disabled');
            } else {
                nextBtn.disabled = true;
                nextBtn.classList.add('disabled');
            }
        }
        update();
        input.addEventListener('input', update);
    });
</script>

</html>
